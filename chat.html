<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SoulTalk AI</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%23a78bfa'/><stop offset='100%25' style='stop-color:%2314b8a6'/></linearGradient></defs><circle cx='50' cy='50' r='45' fill='url(%23g)'/><path d='M30 45 Q50 25 70 45' stroke='white' stroke-width='4' fill='none' stroke-linecap='round'/><circle cx='38' cy='48' r='4' fill='white'/><circle cx='62' cy='48' r='4' fill='white'/><path d='M35 65 Q50 75 65 65' stroke='white' stroke-width='4' fill='none' stroke-linecap='round'/></svg>">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#0f172a;
    color:white;
    height:100vh;
    display:flex;
    flex-direction:column;
}

/* Gender-specific themes */
body.theme-male{
    background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

body.theme-female{
    background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

body.theme-male .chat-header,
body.theme-male .input-area{
    background:rgba(102,126,234,0.1);
    border-color:rgba(102,126,234,0.3);
}

body.theme-female .chat-header,
body.theme-female .input-area{
    background:rgba(240,147,251,0.1);
    border-color:rgba(245,87,108,0.3);
}

body.theme-male .msg-user{
    background:linear-gradient(135deg, #667eea, #764ba2);
}

body.theme-female .msg-user{
    background:linear-gradient(135deg, #f093fb, #f5576c);
}

body.theme-male .send-btn{
    background:linear-gradient(90deg,#667eea,#764ba2);
}

body.theme-female .send-btn{
    background:linear-gradient(90deg,#f093fb,#f5576c);
}

body.theme-male .icon-btn:hover{
    background:rgba(102,126,234,0.3);
}

body.theme-female .icon-btn:hover{
    background:rgba(240,147,251,0.3);
}

/* Header */
.chat-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:15px 30px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(12px);
    border-bottom:1px solid rgba(255,255,255,0.1);
}

.user-info{
    display:flex;
    align-items:center;
    gap:15px;
}

.avatar{
    width:45px;
    height:45px;
    border-radius:50%;
    background:linear-gradient(135deg,#667eea,#764ba2);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:20px;
}

.user-details h3{
    font-size:16px;
    margin-bottom:3px;
}

.user-details p{
    font-size:12px;
    color:#94a3b8;
}

.header-actions{
    display:flex;
    gap:10px;
}

.icon-btn{
    background:rgba(255,255,255,0.1);
    border:none;
    padding:10px 15px;
    border-radius:8px;
    color:white;
    cursor:pointer;
    transition:background 0.3s;
}

.icon-btn:hover{
    background:rgba(255,255,255,0.2);
}

/* Chat Container */
.chat-container{
    flex:1;
    display:flex;
    overflow:hidden;
}

.companion-side{
    width:350px;
    background:rgba(255,255,255,0.02);
    border-right:1px solid rgba(255,255,255,0.1);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:30px;
    position:relative;
}

.companion-side img{
    width:100%;
    max-width:300px;
    filter:drop-shadow(0 10px 30px rgba(99,102,241,0.3));
    cursor:pointer;
    transition:transform 0.3s;
}

.companion-side img:hover{
    transform:scale(1.05);
}

.call-indicator{
    position:absolute;
    top:20px;
    right:20px;
    width:50px;
    height:50px;
    background:#10b981;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:24px;
    cursor:pointer;
    transition:all 0.3s;
    box-shadow:0 4px 15px rgba(16,185,129,0.4);
}

.call-indicator:hover{
    transform:scale(1.1);
}

.call-indicator.active{
    background:#ef4444;
    animation:pulse 1.5s infinite;
}

@keyframes pulse{
    0%,100%{box-shadow:0 4px 15px rgba(239,68,68,0.4);}
    50%{box-shadow:0 4px 25px rgba(239,68,68,0.8);}
}

.companion-name{
    margin-top:20px;
    font-size:20px;
    font-weight:600;
    color:#a78bfa;
}

.companion-status{
    color:#94a3b8;
    font-size:14px;
    margin-top:5px;
}

/* Chat Area */
.chat-area{
    flex:1;
    display:flex;
    flex-direction:column;
}

.messages{
    flex:1;
    overflow-y:auto;
    padding:30px;
    display:flex;
    flex-direction:column;
    gap:15px;
}

.messages::-webkit-scrollbar{width:8px;}
.messages::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);}
.messages::-webkit-scrollbar-thumb{background:#6366f1;border-radius:10px;}

.msg-user{
    background:#3b82f6;
    padding:12px 18px;
    border-radius:18px 18px 4px 18px;
    max-width:70%;
    margin-left:auto;
    animation:slideIn 0.3s;
}

.msg-ai{
    background:#e5e7eb;
    color:#111;
    padding:12px 18px;
    border-radius:18px 18px 18px 4px;
    max-width:70%;
    animation:slideIn 0.3s;
}

@keyframes slideIn{
    from{opacity:0;transform:translateY(10px);}
    to{opacity:1;transform:translateY(0);}
}

.typing{
    display:none;
    background:#e5e7eb;
    color:#111;
    padding:12px 18px;
    border-radius:18px;
    max-width:80px;
}

.typing span{
    display:inline-block;
    width:8px;
    height:8px;
    background:#6366f1;
    border-radius:50%;
    margin:0 2px;
    animation:bounce 1.4s infinite;
}

.typing span:nth-child(2){animation-delay:0.2s;}
.typing span:nth-child(3){animation-delay:0.4s;}

@keyframes bounce{
    0%,60%,100%{transform:translateY(0);}
    30%{transform:translateY(-10px);}
}

/* Input Area */
.input-area{
    padding:20px 30px;
    background:rgba(255,255,255,0.05);
    border-top:1px solid rgba(255,255,255,0.1);
}

.input-wrapper{
    display:flex;
    gap:10px;
    max-width:1000px;
    margin:0 auto;
}

.input-wrapper input{
    flex:1;
    padding:14px 20px;
    border:2px solid rgba(255,255,255,0.1);
    border-radius:25px;
    background:rgba(255,255,255,0.05);
    color:white;
    font-size:15px;
}

.input-wrapper input:focus{
    outline:none;
    border-color:#6366f1;
    background:rgba(255,255,255,0.08);
}

.input-wrapper input::placeholder{
    color:#94a3b8;
}

.send-btn{
    background:linear-gradient(90deg,#667eea,#764ba2);
    border:none;
    padding:14px 30px;
    border-radius:25px;
    color:white;
    font-weight:600;
    cursor:pointer;
    transition:transform 0.1s;
}

.send-btn:hover{
    transform:scale(1.05);
}

.mic-btn{
    background:rgba(255,255,255,0.1);
    border:none;
    padding:14px 18px;
    border-radius:25px;
    color:white;
    font-size:20px;
    cursor:pointer;
    transition:all 0.3s;
}

.mic-btn:hover{
    background:rgba(255,255,255,0.2);
    transform:scale(1.05);
}

/* Modal Styles */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;}
.modal.show{display:flex;}
.modal-content{background:#1e293b;padding:30px;border-radius:15px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;}
.modal-content h2{margin-bottom:20px;color:#a78bfa;}
.modal-content::-webkit-scrollbar{width:8px;}
.modal-content::-webkit-scrollbar-thumb{background:#6366f1;border-radius:10px;}
.close-modal{float:right;font-size:28px;cursor:pointer;color:#94a3b8;}
.close-modal:hover{color:#fff;}
.chart-container{margin:20px 0;}
.mood-bar{height:30px;background:#6366f1;margin:10px 0;border-radius:5px;display:flex;align-items:center;padding:0 10px;}
.resource-item{background:rgba(255,255,255,0.05);padding:15px;margin:10px 0;border-radius:10px;border-left:4px solid #6366f1;}
.coping-card{background:rgba(255,255,255,0.05);padding:20px;margin:15px 0;border-radius:10px;}
.sentiment-badge{display:inline-block;padding:5px 10px;border-radius:15px;font-size:12px;margin:5px;}
.sentiment-positive{background:#10b981;}
.sentiment-negative{background:#ef4444;}
.sentiment-neutral{background:#6b7280;}
.meditation-exercise{background:rgba(99,102,241,0.1);padding:20px;margin:15px 0;border-radius:10px;border-left:4px solid #6366f1;cursor:pointer;transition:all 0.3s;}
.meditation-exercise:hover{background:rgba(99,102,241,0.2);transform:translateX(5px);}
.audio-player{background:rgba(255,255,255,0.05);padding:15px;border-radius:10px;margin:10px 0;}
.play-btn{background:#10b981;border:none;padding:10px 20px;border-radius:20px;color:white;cursor:pointer;font-weight:600;}
.play-btn:hover{background:#059669;}
.therapy-form input,.therapy-form select{width:100%;padding:12px;margin:10px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:white;}
.therapy-form button{background:#6366f1;border:none;padding:12px 24px;border-radius:8px;color:white;cursor:pointer;font-weight:600;margin-top:10px;}
.progress-stat{background:rgba(255,255,255,0.05);padding:20px;margin:15px 0;border-radius:10px;display:flex;justify-content:space-between;align-items:center;}
.progress-number{font-size:32px;font-weight:bold;color:#a78bfa;}

/* Responsive */
@media(max-width:900px){
    .companion-side{
        display:none;
    }
    .chat-header{
        padding:15px 20px;
        flex-wrap:wrap;
        gap:10px;
    }
    .user-info{
        gap:10px;
    }
    .avatar{
        width:40px;
        height:40px;
        font-size:18px;
    }
    .header-actions{
        flex-wrap:wrap;
        gap:8px;
    }
    .messages{
        padding:20px 15px;
    }
    .msg-user,.msg-ai{
        max-width:85%;
    }
    .input-area{
        padding:15px;
    }
    .input-wrapper input{
        padding:12px 16px;
        font-size:14px;
    }
    .send-btn{
        padding:12px 20px;
    }
}

@media(max-width:600px){
    .chat-header{
        padding:12px 15px;
    }
    .user-details h3{
        font-size:14px;
    }
    .user-details p{
        font-size:11px;
    }
    .header-actions{
        width:100%;
        justify-content:space-between;
    }
    #languageSelector{
        padding:8px 12px;
        font-size:13px;
    }
    .icon-btn{
        padding:8px 12px;
        font-size:13px;
    }
    .messages{
        padding:15px 10px;
    }
    .msg-user,.msg-ai{
        max-width:90%;
        padding:10px 14px;
        font-size:14px;
    }
    .input-area{
        padding:12px 10px;
    }
    .input-wrapper{
        gap:8px;
    }
    .input-wrapper input{
        padding:10px 14px;
        font-size:13px;
    }
    .send-btn{
        padding:10px 16px;
        font-size:14px;
    }
}
</style>
</head>

<body>

<div class="chat-header">
    <div class="user-info">
        <div class="avatar" id="userAvatar">üë§</div>
        <div class="user-details">
            <h3 id="userName">User</h3>
            <p><span id="messageCounter">0</span> messages today</p>
        </div>
    </div>
    <div class="header-actions">
        <select id="languageSelector" onchange="changeLanguage()" style="background:rgba(255, 255, 255, 0.1);border:none;padding:10px 15px;border-radius:8px;color:rgb(255, 255, 255);cursor:pointer;">
            <option value="en" style="color: black;">üá¨üáß English</option>
            <!-- <option value="hi" style="color: black;">üáÆüá≥ Hinglish</option> -->
        </select>
        <select id="voiceSelector" onchange="changeVoicePreference()" style="background:rgba(255,255,255,0.1);border:none;padding:10px 15px;border-radius:8px;color:rgb(255, 255, 255);cursor:pointer;">
            <option value="auto" style="color: black;">üéôÔ∏è Auto Voice</option>
            <option value="male" style="color: black;">üë® Male Voice</option>
            <option value="female" style="color: black;">üë© Female Voice</option>
        </select>
        <!-- <button class="icon-btn" onclick="showMoodChart()">üìä</button>
        <button class="icon-btn" onclick="exportConversation()">üíæ</button>
        <button class="icon-btn" onclick="showCopingStrategies()">üßò</button>
        <button class="icon-btn" onclick="showResources()">üè•</button>
        <button class="icon-btn" onclick="showMeditation()">üßò‚Äç‚ôÇÔ∏è</button>
        <button class="icon-btn" onclick="showTherapyScheduler()">üìÖ</button>
        <button class="icon-btn" onclick="showProgressReport()">üìä</button> -->
        <button class="icon-btn" onclick="clearChat()">üóëÔ∏è Clear</button>
        <button class="icon-btn" onclick="goHome()">üè† Home</button>
        <button class="icon-btn" onclick="logout()">üö™Logout</button>
    </div>
</div>

<div class="chat-container">
    <div class="companion-side">
        <div class="call-indicator" id="callBtn" onclick="toggleVoiceCall()" title="Click to start voice call">üìû</div>
        <img id="companionImage" src="./ai-companion.svg" alt="AI Companion" onclick="toggleVoiceCall()">
        <div class="companion-name">Your AI Friend</div>
        <div class="companion-status" id="companionStatus">Always here for you üíô</div>
    </div>

    <div class="chat-area">
        <div class="messages" id="messages">
            <!-- Messages will appear here -->
        </div>

        <div class="input-area">
            <div class="input-wrapper">
                <button class="mic-btn" id="micBtn" onclick="toggleVoiceInput()" title="Click to speak">üé§</button>
                <input type="text" id="messageInput" placeholder="Type or speak your message..." autocomplete="off">
                <button class="send-btn" id="sendBtn">Send</button>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<div id="moodModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('moodModal')">&times;</span>
        <h2>üìä Mood Tracking Chart</h2>
        <div id="moodChartContent"></div>
    </div>
</div>

<div id="resourcesModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('resourcesModal')">&times;</span>
        <h2>üè• Mental Health Resources</h2>
        <div id="resourcesContent"></div>
    </div>
</div>

<div id="copingModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('copingModal')">&times;</span>
        <h2>üßò Personalized Coping Strategies</h2>
        <div id="copingContent"></div>
    </div>
</div>

<div id="meditationModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('meditationModal')">&times;</span>
        <h2>üßò‚ôÇÔ∏è Guided Meditation & Breathing</h2>
        <div id="meditationContent"></div>
    </div>
</div>

<div id="therapyModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('therapyModal')">&times;</span>
        <h2>üìÖ Therapy Session Scheduler</h2>
        <div id="therapyContent"></div>
    </div>
</div>

<div id="progressModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('progressModal')">&times;</span>
        <h2>üìä Progress Report</h2>
        <div id="progressContent"></div>
    </div>
</div>

<script src="chat.js"></script>
</body>
</html>
